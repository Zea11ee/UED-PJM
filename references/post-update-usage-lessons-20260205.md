# UED-PJM 上次更新后实战经验沉淀（基线：2026-02-05）

## 1) 适用范围与结论
- 适用范围：UED 需求管理（需求查询、父任务梳理、WBS 拆解、确认后落库）。
- 基线版本：`SKILL.md` 中 `Session enforcement additions (2026-02-05)` 后的全部实操。
- 核心结论：最稳定的工作流是“读取来源 -> 草案评审 -> 明确确认 -> 落库回执”，并严格执行字段边界与人员 ID 解析。

## 2) 已验证的高效协作模式
- 固定节奏：`梳理父任务+WBS草案 -> 用户逐条调整 -> 确认 -> 落库`。
- 先粗后细：先给标准 WBS 骨架，再按反馈调人员、排期、工时。
- 增量调整：用户要求“先只排1-2条”时，先落最小集合，后续再补。
- 强依赖优先：上线走查绑定上线当天；开发在设计稿输出后即启动；测试反馈修改与测试任务衔接。

## 3) 需求拆解经验（按场景）
- 活动上线类：推荐链路  
  `产品PRD -> 设计出稿 -> 开发实现 -> 测试走查 -> 测试反馈修改 -> 回归验证 -> 产品验收与配置 -> 多语言配置 -> 上线checklist与跟进 -> 上线走查`。
- 优化/联调类：可压缩为 2-4 条短任务（设计联调、开发联调、测试、验收）。
- 问题修复类：先落“开发修复 + 设计/产品验收”，其余任务按风险补充。

## 4) 人员分配经验
- 执行人必须使用可识别 ID（open_id/user_id），不能只写姓名文本。
- 昵称/英文名映射要及时固化（示例：`Xiao` 纠偏为 `肖荣健` 后需全链路统一）。
- 相同项目线优先复用历史负责人，减少上下文切换成本。

## 5) 排期与工时经验
- 全部日期统一 Asia/Shanghai，不使用 UTC 直写。
- 相对日期（今天/明天）落库前转换为绝对日期。
- 工时按“复用量 + 新增模块数 + 验收/返修成本”估算：
  - 复用旧页 + 轻视觉更新：约 1d；
  - 每新增模块需额外开发与测试成本；
  - 测试反馈修改任务建议独立建条，避免吞并在开发任务里。
- 非工作日与节假日约束要在排期前检查，避免跨周返工。

## 6) 字段与写入规则经验
- 先出草案再写库，未收到“确认/落库”不得写入。
- 父任务/子任务字段按 skill 约束最小集合填写，不扩写非必需字段。
- SingleSelect/MultiSelect 写入选项名称字符串，不写 option_id，避免乱码选项。
- DuplexLink 必须写 `record_id` 字符串数组。
- 附件无 file_token 时，链接写入“描述”，附件字段保持空。

## 7) 备注与外链处理经验
- “处理备注里的评审记录/文档链接”应视为强制步骤。
- 若需求含外链，至少完成原链接读取；若链接内再含关键链接，最多再下钻一层（总 2 hop）。
- 结论要能回溯到来源句子，避免凭经验臆断。

## 8) 常见错误与规避
- 错误：未确认直接落库。  
  规避：确认词闸门（确认/落库/执行）前不写入。
- 错误：人员错派（昵称歧义）。  
  规避：先解析人，再落 ID。
- 错误：任务链缺“测试反馈修改/验收反馈跟进”。  
  规避：出现测试任务时，强制检查闭环修复任务。
- 错误：上线走查排在非上线日。  
  规避：走查任务绑定上线日期。

## 9) 建议固化 SOP（执行版）
1. 读取需求正文、备注、外链内容。  
2. 输出父任务草案（字段最小集合）。  
3. 输出 WBS 草案（任务名/人/起止/工时/依赖）。  
4. 接收逐条修改并回显最终版。  
5. 等待明确确认再落库。  
6. 回传父任务与 WBS 记录 ID。  
7. 将新增规则写入 `feedback.md` 与本文件。

## 10) 后续维护建议
- 维护“项目线默认角色映射”与“常用 WBS 模板”两张轻量知识表。
- 每周复盘一次“估时偏差 > 30%”的任务，更新工时基线。
- 对高频需求类型（活动页、配置类、修复类）持续收敛标准拆分模板。
